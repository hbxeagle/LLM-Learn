<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>å¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰è¿ç®—è¿‡ç¨‹å¯è§†åŒ–</title>
  <style>
    body { font-family: 'PingFang SC', 'Microsoft YaHei', Arial, sans-serif; background: #181f2a; margin: 0; padding: 0; }
    h1, h2 { text-align: center; color: #eaf6ff; }
    .container { max-width: 1000px; margin: 30px auto; background: #232b3a; border-radius: 16px; box-shadow: 0 4px 24px #0006; padding: 36px; }
    .section { margin-bottom: 48px; }
    .mlp-diagram { display: flex; justify-content: center; align-items: flex-end; gap: 60px; margin: 32px 0; }
    .layer { display: flex; flex-direction: column; align-items: center; gap: 16px; }
    .neuron { width: 36px; height: 36px; background: linear-gradient(135deg, #1de9b6 0%, #2979ff 100%); border-radius: 50%; border: 2.5px solid #fff3; box-shadow: 0 2px 8px #1de9b655; display: flex; align-items: center; justify-content: center; color: #fff; font-weight: bold; font-size: 20px; transition: background 0.3s; }
    .neuron:hover { background: linear-gradient(135deg, #2979ff 0%, #1de9b6 100%); }
    .layer-label { margin-top: 8px; font-size: 15px; color: #7ee7ff; }
    .connections { position: absolute; pointer-events: none; }
    .vector, .matrix { display: flex; }
    .vector .cell { min-width: 36px; height: 40px; padding: 0 18px; background: linear-gradient(135deg, #232b3a 0%, #2e3c54 100%); border: 2px solid #3de0ff; margin: 2px; display: inline-flex; align-items: center; justify-content: center; font-size: 19px; color: #eaf6ff; border-radius: 8px; transition: background 0.3s, border 0.3s; box-sizing: border-box; }
    .matrix { flex-direction: column; }
    .matrix-row { display: flex; }
    .matrix .cell { min-width: 36px; height: 40px; padding: 0 18px; background: linear-gradient(135deg, #232b3a 0%, #2e3c54 100%); border: 2px solid #3de0ff; margin: 2px; display: flex; align-items: center; justify-content: center; font-size: 19px; color: #eaf6ff; border-radius: 8px; transition: background 0.3s, border 0.3s; box-sizing: border-box; }
    .arrow { font-size: 32px; margin: 0 18px; color: #3de0ff; font-weight: bold; }
    .step-label { text-align: center; margin: 8px 0 16px 0; color: #7ee7ff; }
    .formula { text-align: center; font-size: 18px; color: #3de0ff; margin-bottom: 12px; font-weight: 500; }
    .step-box .formula:first-child { color: #1de9b6; font-size: 28px; font-weight: bold; margin-bottom: 10px; text-shadow: 0 2px 12px #1de9b6cc, 0 0px 2px #fff; letter-spacing: 2px; }
    .highlight { background: linear-gradient(135deg, #1de9b6 0%, #2979ff 100%); border-color: #1de9b6 !important; color: #fff !important; }
    .plus { font-size: 22px; color: #3de0ff; margin: 0 6px; }
    .equal { font-size: 22px; color: #3de0ff; margin: 0 6px; }
    .note { color: #7ee7ff; font-size: 14px; text-align: center; margin-top: 8px; }
    button { display: block; margin: 16px auto; padding: 8px 16px; background: linear-gradient(90deg, #1de9b6 0%, #2979ff 100%); color: #fff; border: none; border-radius: 6px; cursor: pointer; font-size: 17px; font-weight: bold; box-shadow: 0 2px 8px #1de9b655; transition: background 0.3s; }
    button:hover { background: linear-gradient(90deg, #2979ff 0%, #1de9b6 100%); }
    .animation-step { display: none; }
    .animation-step.active { display: block; }
    .step-box { background: linear-gradient(135deg, #232b3a 0%, #2e3c54 100%); border-radius: 16px; box-shadow: 0 2px 12px #1de9b633; border: 2px solid #3de0ff44; }
  </style>
</head>
<body>
  <div class="container">
    <h1>å¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰è¿ç®—è¿‡ç¨‹å¯è§†åŒ–</h1>
    <div class="section">
      <h2>1. å¤šå±‚æ„ŸçŸ¥æœºç»“æ„å›¾</h2>
      <div id="mlp-structure" style="position: relative; height: 320px; width: 800px; margin: 0 auto;">
        <canvas id="mlp-canvas" width="800" height="320" style="position: absolute; left: 0; top: 0; z-index: 0;"></canvas>
        <div id="mlp-nodes" style="position: absolute; left: 0; top: 0; width: 800px; height: 320px; z-index: 1;"></div>
      </div>
      <div class="note">æ¯ä¸€å±‚çš„ç¥ç»å…ƒä¸ä¸‹ä¸€å±‚çš„æ‰€æœ‰ç¥ç»å…ƒå…¨è¿æ¥</div>
    </div>
    <div class="section">
      <h2>2. é€å…ƒç´ å‡½æ•°è®¡ç®—è¿‡ç¨‹</h2>
      <div class="step-label">ä»¥éšè—å±‚ç¬¬ä¸€ä¸ªç¥ç»å…ƒ hâ‚ ä¸ºä¾‹ï¼š</div>
      <div class="formula">hâ‚ = Ïƒ(wâ‚â‚Â·xâ‚ + wâ‚â‚‚Â·xâ‚‚ + wâ‚â‚ƒÂ·xâ‚ƒ + bâ‚)</div>
      <div style="display: flex; align-items: center; justify-content: center;">
        <div class="vector" id="x-vector">
          <div class="cell">xâ‚</div>
          <div class="cell">xâ‚‚</div>
          <div class="cell">xâ‚ƒ</div>
        </div>
        <span class="arrow">Ã—</span>
        <div class="vector" id="w1-vector">
          <div class="cell">wâ‚â‚</div>
          <div class="cell">wâ‚â‚‚</div>
          <div class="cell">wâ‚â‚ƒ</div>
        </div>
        <span class="arrow">+</span>
        <div class="vector" id="b1-vector">
          <div class="cell">bâ‚</div>
        </div>
        <span class="arrow">=</span>
        <div class="vector" id="h1-vector">
          <div class="cell highlight">hâ‚</div>
        </div>
      </div>
      <div class="note">Ïƒ è¡¨ç¤ºæ¿€æ´»å‡½æ•°ï¼ˆå¦‚ ReLUã€Sigmoid ç­‰ï¼‰</div>
      <div id="step1-steps" style="margin-top: 32px; display: flex; flex-direction: column; gap: 40px; align-items: center;">
        <div class="step-box" style="background: #f6f8fa; border-radius: 12px; box-shadow: 0 2px 8px #0001; padding: 32px 24px; min-width: 340px; max-width: 480px; display: flex; flex-direction: column; align-items: center;">
          <div class="formula" style="font-size: 22px; margin-bottom: 10px; font-weight: bold;">æ­¥éª¤ 1</div>
          <div class="formula" style="font-size: 18px; margin-bottom: 18px;">è®¡ç®— wâ‚â‚Â·xâ‚ + wâ‚â‚‚Â·xâ‚‚ + wâ‚â‚ƒÂ·xâ‚ƒ</div>
          <div class="vector" style="margin-bottom: 0;">
            <div class="cell highlight">wâ‚â‚Â·xâ‚</div>
            <div class="cell highlight">wâ‚â‚‚Â·xâ‚‚</div>
            <div class="cell highlight">wâ‚â‚ƒÂ·xâ‚ƒ</div>
          </div>
        </div>
        <div class="step-box" style="background: #f6f8fa; border-radius: 12px; box-shadow: 0 2px 8px #0001; padding: 32px 24px; min-width: 340px; max-width: 480px; display: flex; flex-direction: column; align-items: center;">
          <div class="formula" style="font-size: 22px; margin-bottom: 10px; font-weight: bold;">æ­¥éª¤ 2</div>
          <div class="formula" style="font-size: 18px; margin-bottom: 18px;">åŠ ä¸Šåç½® bâ‚</div>
          <div class="vector" style="margin-bottom: 0;">
            <div class="cell highlight">wâ‚â‚Â·xâ‚ + wâ‚â‚‚Â·xâ‚‚ + wâ‚â‚ƒÂ·xâ‚ƒ + bâ‚</div>
          </div>
        </div>
        <div class="step-box" style="background: #f6f8fa; border-radius: 12px; box-shadow: 0 2px 8px #0001; padding: 32px 24px; min-width: 340px; max-width: 480px; display: flex; flex-direction: column; align-items: center;">
          <div class="formula" style="font-size: 22px; margin-bottom: 10px; font-weight: bold;">æ­¥éª¤ 3</div>
          <div class="formula" style="font-size: 18px; margin-bottom: 18px;">åº”ç”¨æ¿€æ´»å‡½æ•° Ïƒ</div>
          <div class="vector" style="margin-bottom: 0;">
            <div class="cell highlight">hâ‚ = Ïƒ(wâ‚â‚Â·xâ‚ + wâ‚â‚‚Â·xâ‚‚ + wâ‚â‚ƒÂ·xâ‚ƒ + bâ‚)</div>
          </div>
        </div>
      </div>
    </div>
    <div class="section">
      <h2>3. å‘é‡/çŸ©é˜µè®¡ç®—è¿‡ç¨‹</h2>
      <div class="step-label">éšè—å±‚æ•´ä½“è®¡ç®—ï¼š<br> <span class="formula">\( \mathbf{h} = \sigma(\mathbf{W} \mathbf{x} + \mathbf{b}) \)</span></div>
      <!-- çŸ©é˜µè®¡ç®—ç¤ºæ„å›¾ -->
      <div style="display: flex; align-items: center; justify-content: center; margin: 32px 0 40px 0; gap: 24px;">
        <!-- x å‘é‡ -->
        <div style="display: flex; flex-direction: column; align-items: center;">
          <div style="font-size: 18px; color: #888; margin-bottom: 6px;">è¾“å…¥å‘é‡ x</div>
          <div class="vector" style="flex-direction: column;">
            <div class="cell">xâ‚</div>
            <div class="cell">xâ‚‚</div>
            <div class="cell">xâ‚ƒ</div>
          </div>
        </div>
        <span class="arrow" style="font-size: 32px;">Ã—</span>
        <!-- W çŸ©é˜µ -->
        <div style="display: flex; flex-direction: column; align-items: flex-end;">
          <div style="font-size: 18px; color: #888; margin-bottom: 6px;">æƒé‡çŸ©é˜µ W</div>
          <div class="matrix">
            <div class="matrix-row">
              <div class="cell">wâ‚â‚</div><div class="cell">wâ‚â‚‚</div><div class="cell">wâ‚â‚ƒ</div>
            </div>
            <div class="matrix-row">
              <div class="cell">wâ‚‚â‚</div><div class="cell">wâ‚‚â‚‚</div><div class="cell">wâ‚‚â‚ƒ</div>
            </div>
            <div class="matrix-row">
              <div class="cell">wâ‚ƒâ‚</div><div class="cell">wâ‚ƒâ‚‚</div><div class="cell">wâ‚ƒâ‚ƒ</div>
            </div>
            <div class="matrix-row">
              <div class="cell">wâ‚„â‚</div><div class="cell">wâ‚„â‚‚</div><div class="cell">wâ‚„â‚ƒ</div>
            </div>
          </div>
        </div>
        <span class="arrow" style="font-size: 32px;">+</span>
        <!-- b å‘é‡ -->
        <div style="display: flex; flex-direction: column; align-items: center;">
          <div style="font-size: 18px; color: #888; margin-bottom: 6px;">åç½®å‘é‡ b</div>
          <div class="vector" style="flex-direction: column;">
            <div class="cell">bâ‚</div>
            <div class="cell">bâ‚‚</div>
            <div class="cell">bâ‚ƒ</div>
            <div class="cell">bâ‚„</div>
          </div>
        </div>
        <span class="arrow" style="font-size: 32px;">=</span>
        <!-- h å‘é‡ -->
        <div style="display: flex; flex-direction: column; align-items: center;">
          <div style="font-size: 18px; color: #888; margin-bottom: 6px;">éšè—å±‚å‘é‡ h</div>
          <div class="vector" style="flex-direction: column;">
            <div class="cell highlight">hâ‚</div>
            <div class="cell highlight">hâ‚‚</div>
            <div class="cell highlight">hâ‚ƒ</div>
            <div class="cell highlight">hâ‚„</div>
          </div>
        </div>
      </div>
      <div id="matrix-steps" style="margin-top: 32px; display: flex; flex-direction: column; gap: 40px; align-items: center;">
        <div class="step-box" style="background: #f6f8fa; border-radius: 12px; box-shadow: 0 2px 8px #0001; padding: 32px 24px; min-width: 340px; max-width: 520px; display: flex; flex-direction: column; align-items: center;">
          <div class="formula" style="font-size: 22px; margin-bottom: 10px; font-weight: bold;">æ­¥éª¤ 1: çŸ©é˜µä¹˜æ³• <b>Wğ‘¥</b></div>
          <div style="display: flex; flex-direction: column; gap: 12px; align-items: center;">
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">wâ‚â‚Â·xâ‚ + wâ‚â‚‚Â·xâ‚‚ + wâ‚â‚ƒÂ·xâ‚ƒ</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">wâ‚‚â‚Â·xâ‚ + wâ‚‚â‚‚Â·xâ‚‚ + wâ‚‚â‚ƒÂ·xâ‚ƒ</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">wâ‚ƒâ‚Â·xâ‚ + wâ‚ƒâ‚‚Â·xâ‚‚ + wâ‚ƒâ‚ƒÂ·xâ‚ƒ</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">wâ‚„â‚Â·xâ‚ + wâ‚„â‚‚Â·xâ‚‚ + wâ‚„â‚ƒÂ·xâ‚ƒ</div>
            </div>
          </div>
        </div>
        <div class="step-box" style="background: #f6f8fa; border-radius: 12px; box-shadow: 0 2px 8px #0001; padding: 32px 24px; min-width: 340px; max-width: 520px; display: flex; flex-direction: column; align-items: center;">
          <div class="formula" style="font-size: 22px; margin-bottom: 10px; font-weight: bold;">æ­¥éª¤ 2: åŠ ä¸Šåç½®å‘é‡ <b>b</b></div>
          <div style="display: flex; flex-direction: column; gap: 12px; align-items: center;">
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">wâ‚â‚Â·xâ‚ + wâ‚â‚‚Â·xâ‚‚ + wâ‚â‚ƒÂ·xâ‚ƒ + bâ‚</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">wâ‚‚â‚Â·xâ‚ + wâ‚‚â‚‚Â·xâ‚‚ + wâ‚‚â‚ƒÂ·xâ‚ƒ + bâ‚‚</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">wâ‚ƒâ‚Â·xâ‚ + wâ‚ƒâ‚‚Â·xâ‚‚ + wâ‚ƒâ‚ƒÂ·xâ‚ƒ + bâ‚ƒ</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">wâ‚„â‚Â·xâ‚ + wâ‚„â‚‚Â·xâ‚‚ + wâ‚„â‚ƒÂ·xâ‚ƒ + bâ‚„</div>
            </div>
          </div>
        </div>
        <div class="step-box" style="background: #f6f8fa; border-radius: 12px; box-shadow: 0 2px 8px #0001; padding: 32px 24px; min-width: 340px; max-width: 520px; display: flex; flex-direction: column; align-items: center;">
          <div class="formula" style="font-size: 22px; margin-bottom: 10px; font-weight: bold;">æ­¥éª¤ 3: åº”ç”¨æ¿€æ´»å‡½æ•° <b>Ïƒ</b></div>
          <div style="display: flex; flex-direction: column; gap: 12px; align-items: center;">
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">hâ‚ = Ïƒ(wâ‚â‚Â·xâ‚ + wâ‚â‚‚Â·xâ‚‚ + wâ‚â‚ƒÂ·xâ‚ƒ + bâ‚)</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">hâ‚‚ = Ïƒ(wâ‚‚â‚Â·xâ‚ + wâ‚‚â‚‚Â·xâ‚‚ + wâ‚‚â‚ƒÂ·xâ‚ƒ + bâ‚‚)</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">hâ‚ƒ = Ïƒ(wâ‚ƒâ‚Â·xâ‚ + wâ‚ƒâ‚‚Â·xâ‚‚ + wâ‚ƒâ‚ƒÂ·xâ‚ƒ + bâ‚ƒ)</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">hâ‚„ = Ïƒ(wâ‚„â‚Â·xâ‚ + wâ‚„â‚‚Â·xâ‚‚ + wâ‚„â‚ƒÂ·xâ‚ƒ + bâ‚„)</div>
            </div>
          </div>
        </div>
      </div>
      <div class="note">å‘é‡å’ŒçŸ©é˜µç”¨å°æ–¹å—é˜µåˆ—è¡¨ç¤ºï¼Œä¾¿äºç†è§£æ•´ä½“è¿ç®—</div>
    </div>
  </div>
  <script>
    // ç¥ç»å…ƒå‚æ•°
    const mlpLayers = [
      { x: 80, count: 3, color: '#ffb347', label: 'è¾“å…¥å±‚' },
      { x: 350, count: 4, color: '#4f8cff', label: 'éšè—å±‚' },
      { x: 650, count: 2, color: '#43d19e', label: 'è¾“å‡ºå±‚' }
    ];
    const neuronRadius = 16;
    const structureHeight = 320;
    // ç”Ÿæˆç¥ç»å…ƒèŠ‚ç‚¹
    function renderMLPNodes() {
      const container = document.getElementById('mlp-nodes');
      container.innerHTML = '';
      mlpLayers.forEach((layer, li) => {
        const gap = (structureHeight - layer.count * neuronRadius * 2) / (layer.count + 1);
        for (let i = 0; i < layer.count; i++) {
          const y = gap * (i + 1) + neuronRadius + i * neuronRadius * 2;
          const neuron = document.createElement('div');
          neuron.className = 'neuron';
          neuron.style.background = layer.color;
          neuron.style.position = 'absolute';
          neuron.style.left = (layer.x) + 'px';
          neuron.style.top = (y - neuronRadius) + 'px';
          neuron.style.zIndex = 2;
          neuron.innerText = li === 0 ? `x${i+1}` : (li === 1 ? `h${i+1}` : `y${i+1}`);
          container.appendChild(neuron);
        }
        // å±‚æ ‡ç­¾
        const label = document.createElement('div');
        label.className = 'layer-label';
        label.style.position = 'absolute';
        label.style.left = (layer.x - 20) + 'px';
        label.style.top = (structureHeight - 30) + 'px';
        label.style.width = '60px';
        label.style.textAlign = 'center';
        label.innerText = layer.label;
        label.style.zIndex = 2;
        container.appendChild(label);
      });
    }
    // ç»˜åˆ¶MLPç»“æ„çš„è¿çº¿ï¼ˆä¸ç¥ç»å…ƒåœ†ç‚¹ä¸¥æ ¼å¯¹é½ï¼‰
    function drawMLPLines() {
      const canvas = document.getElementById('mlp-canvas');
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.strokeStyle = '#b6c2d9';
      ctx.lineWidth = 2;
      // è®¡ç®—æ¯å±‚ç¥ç»å…ƒä¸­å¿ƒåæ ‡
      const centers = mlpLayers.map(layer => {
        const gap = (structureHeight - layer.count * neuronRadius * 2) / (layer.count + 1);
        return Array.from({length: layer.count}, (_, i) => ({
          x: layer.x + neuronRadius,
          y: gap * (i + 1) + neuronRadius + i * neuronRadius * 2
        }));
      });
      // ç”»çº¿
      for (let l = 0; l < centers.length - 1; l++) {
        for (let i = 0; i < centers[l].length; i++) {
          for (let j = 0; j < centers[l+1].length; j++) {
            ctx.beginPath();
            ctx.moveTo(centers[l][i].x, centers[l][i].y);
            ctx.lineTo(centers[l+1][j].x, centers[l+1][j].y);
            ctx.stroke();
          }
        }
      }
    }
    // åˆå§‹åŒ–ç»“æ„å›¾
    function renderMLPStructure() {
      renderMLPNodes();
      drawMLPLines();
    }
    window.onload = function() {
      renderMLPStructure();
    };
  </script>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</body>
</html> 