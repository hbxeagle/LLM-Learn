<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>å¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰è¿ç®—è¿‡ç¨‹å¯è§†åŒ–</title>
  <style>
    body { font-family: 'PingFang SC', 'Microsoft YaHei', Arial, sans-serif; background: #181f2a; margin: 0; padding: 0; }
    h1, h2 { text-align: center; color: #eaf6ff; }
    .container { max-width: 1000px; margin: 30px auto; background: #232b3a; border-radius: 16px; box-shadow: 0 4px 24px #0006; padding: 36px; }
    .section { margin-bottom: 48px; }
    .mlp-diagram { display: flex; justify-content: center; align-items: flex-end; gap: 60px; margin: 32px 0; }
    .layer { display: flex; flex-direction: column; align-items: center; gap: 16px; }
    .neuron { width: 36px; height: 36px; background: linear-gradient(135deg, #1de9b6 0%, #2979ff 100%); border-radius: 50%; border: 2.5px solid #fff3; box-shadow: 0 2px 8px #1de9b655; display: flex; align-items: center; justify-content: center; color: #fff; font-weight: bold; font-size: 20px; transition: background 0.3s; }
    .neuron:hover { background: linear-gradient(135deg, #2979ff 0%, #1de9b6 100%); }
    .layer-label { margin-top: 8px; font-size: 15px; color: #7ee7ff; }
    .connections { position: absolute; pointer-events: none; }
    .vector, .matrix { display: flex; }
    .vector .cell { min-width: 36px; height: 40px; padding: 0 18px; background: linear-gradient(135deg, #232b3a 0%, #2e3c54 100%); border: 2px solid #3de0ff; margin: 2px; display: inline-flex; align-items: center; justify-content: center; font-size: 19px; color: #eaf6ff; border-radius: 8px; transition: background 0.3s, border 0.3s; box-sizing: border-box; }
    .matrix { flex-direction: column; }
    .matrix-row { display: flex; }
    .matrix .cell { min-width: 36px; height: 40px; padding: 0 18px; background: linear-gradient(135deg, #232b3a 0%, #2e3c54 100%); border: 2px solid #3de0ff; margin: 2px; display: flex; align-items: center; justify-content: center; font-size: 19px; color: #eaf6ff; border-radius: 8px; transition: background 0.3s, border 0.3s; box-sizing: border-box; }
    .arrow { font-size: 32px; margin: 0 18px; color: #3de0ff; font-weight: bold; }
    .step-label { text-align: center; margin: 8px 0 16px 0; color: #7ee7ff; }
    .formula { text-align: center; font-size: 18px; color: #3de0ff; margin-bottom: 12px; font-weight: 500; }
    .step-box .formula:first-child { color: #1de9b6; font-size: 28px; font-weight: bold; margin-bottom: 10px; text-shadow: 0 2px 12px #1de9b6cc, 0 0px 2px #fff; letter-spacing: 2px; }
    .highlight { background: linear-gradient(135deg, #1de9b6 0%, #2979ff 100%); border-color: #1de9b6 !important; color: #fff !important; }
    .plus { font-size: 22px; color: #3de0ff; margin: 0 6px; }
    .equal { font-size: 22px; color: #3de0ff; margin: 0 6px; }
    .note { color: #7ee7ff; font-size: 14px; text-align: center; margin-top: 8px; }
    button { display: block; margin: 16px auto; padding: 8px 16px; background: linear-gradient(90deg, #1de9b6 0%, #2979ff 100%); color: #fff; border: none; border-radius: 6px; cursor: pointer; font-size: 17px; font-weight: bold; box-shadow: 0 2px 8px #1de9b655; transition: background 0.3s; }
    button:hover { background: linear-gradient(90deg, #2979ff 0%, #1de9b6 100%); }
    .animation-step { display: none; }
    .animation-step.active { display: block; }
    .step-box { background: linear-gradient(135deg, #232b3a 0%, #2e3c54 100%); border-radius: 16px; box-shadow: 0 2px 12px #1de9b633; border: 2px solid #3de0ff44; }
  </style>
</head>
<body>
  <div class="container">
    <h1>å¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰è¿ç®—è¿‡ç¨‹å¯è§†åŒ–</h1>
    <div class="section">
      <h2>1. å¤šå±‚æ„ŸçŸ¥æœºç»“æ„å›¾</h2>
      <div id="mlp-structure" style="position: relative; height: 320px; width: 800px; margin: 0 auto;">
        <canvas id="mlp-canvas" width="800" height="320" style="position: absolute; left: 0; top: 0; z-index: 0;"></canvas>
        <div id="mlp-nodes" style="position: absolute; left: 0; top: 0; width: 800px; height: 320px; z-index: 1;"></div>
      </div>
      <div class="note">æ¯ä¸€å±‚çš„ç¥ç»å…ƒä¸ä¸‹ä¸€å±‚çš„æ‰€æœ‰ç¥ç»å…ƒå…¨è¿æ¥</div>
    </div>
    <div class="section">
      <h2>2. é€å…ƒç´ å‡½æ•°è®¡ç®—è¿‡ç¨‹</h2>
      <div class="step-label">ä»¥éšè—å±‚ç¬¬ä¸€ä¸ªç¥ç»å…ƒ hâ‚ ä¸ºä¾‹ï¼š</div>
      <div class="formula">hâ‚ = Ïƒ(wâ‚â‚Â¹Â·xâ‚ + wâ‚â‚‚Â¹Â·xâ‚‚ + wâ‚â‚ƒÂ¹Â·xâ‚ƒ + bâ‚â‚)</div>
      <div style="display: flex; align-items: center; justify-content: center;">
        <div class="vector" id="x-vector">
          <div class="cell">xâ‚</div>
          <div class="cell">xâ‚‚</div>
          <div class="cell">xâ‚ƒ</div>
        </div>
        <span class="arrow">Ã—</span>
        <div class="vector" id="w1-vector">
          <div class="cell">wâ‚â‚Â¹</div>
          <div class="cell">wâ‚â‚‚Â¹</div>
          <div class="cell">wâ‚â‚ƒÂ¹</div>
        </div>
        <span class="arrow">+</span>
        <div class="vector" id="b1-vector">
          <div class="cell">bâ‚â‚</div>
        </div>
        <span class="arrow">=</span>
        <div class="vector" id="h1-vector">
          <div class="cell highlight">hâ‚</div>
        </div>
      </div>
      <div class="note">Ïƒ è¡¨ç¤ºæ¿€æ´»å‡½æ•°ï¼ˆå¦‚ ReLUã€Sigmoid ç­‰ï¼‰</div>
      <div id="step1-steps" style="margin-top: 32px; display: flex; flex-direction: column; gap: 40px; align-items: center;">
        <div class="step-box" style="background: linear-gradient(135deg, #232b3a 0%, #2e3c54 100%); border-radius: 16px; box-shadow: 0 2px 12px #1de9b633; border: 2px solid #3de0ff44; display: flex; flex-direction: column; align-items: center; min-width: 340px; max-width: 520px; padding: 32px 24px;">
          <div class="formula">æ­¥éª¤ 1</div>
          <div class="formula">è®¡ç®— wâ‚â‚Â¹Â·xâ‚ + wâ‚â‚‚Â¹Â·xâ‚‚ + wâ‚â‚ƒÂ¹Â·xâ‚ƒ</div>
          <div class="vector">
            <div class="cell highlight">wâ‚â‚Â¹Â·xâ‚</div>
            <div class="cell highlight">wâ‚â‚‚Â¹Â·xâ‚‚</div>
            <div class="cell highlight">wâ‚â‚ƒÂ¹Â·xâ‚ƒ</div>
          </div>
        </div>
        <div class="step-box" style="background: linear-gradient(135deg, #232b3a 0%, #2e3c54 100%); border-radius: 16px; box-shadow: 0 2px 12px #1de9b633; border: 2px solid #3de0ff44; display: flex; flex-direction: column; align-items: center; min-width: 340px; max-width: 520px; padding: 32px 24px;">
          <div class="formula">æ­¥éª¤ 2</div>
          <div class="formula">åŠ ä¸Šåç½® bâ‚â‚</div>
          <div class="vector">
            <div class="cell highlight">wâ‚â‚Â¹Â·xâ‚ + wâ‚â‚‚Â¹Â·xâ‚‚ + wâ‚â‚ƒÂ¹Â·xâ‚ƒ + bâ‚â‚</div>
          </div>
        </div>
        <div class="step-box" style="background: linear-gradient(135deg, #232b3a 0%, #2e3c54 100%); border-radius: 16px; box-shadow: 0 2px 12px #1de9b633; border: 2px solid #3de0ff44; display: flex; flex-direction: column; align-items: center; min-width: 340px; max-width: 520px; padding: 32px 24px;">
          <div class="formula">æ­¥éª¤ 3</div>
          <div class="formula">åº”ç”¨æ¿€æ´»å‡½æ•° Ïƒ</div>
          <div class="vector">
            <div class="cell highlight">hâ‚ = Ïƒ(wâ‚â‚Â¹Â·xâ‚ + wâ‚â‚‚Â¹Â·xâ‚‚ + wâ‚â‚ƒÂ¹Â·xâ‚ƒ + bâ‚â‚)</div>
          </div>
        </div>
      </div>
    </div>
    <div class="section">
      <h2>3. å‘é‡/çŸ©é˜µè®¡ç®—è¿‡ç¨‹</h2>
      <div class="step-label">éšè—å±‚æ•´ä½“è®¡ç®—ï¼š<br> <span class="formula">\( \mathbf{h} = \sigma(\mathbf{W}_1 \mathbf{x} + \mathbf{b}_1) \)</span></div>
      <!-- çŸ©é˜µè®¡ç®—ç¤ºæ„å›¾ -->
      <div style="display: flex; align-items: center; justify-content: center; margin: 32px 0 40px 0; gap: 24px;">
        <!-- x å‘é‡ -->
        <div style="display: flex; flex-direction: column; align-items: center;">
          <div style="font-size: 18px; color: #888; margin-bottom: 6px;">è¾“å…¥å‘é‡ x</div>
          <div class="vector" style="flex-direction: column;">
            <div class="cell">xâ‚</div>
            <div class="cell">xâ‚‚</div>
            <div class="cell">xâ‚ƒ</div>
          </div>
        </div>
        <span class="arrow" style="font-size: 32px;">Ã—</span>
        <!-- Wâ‚ çŸ©é˜µ -->
        <div style="display: flex; flex-direction: column; align-items: flex-end;">
          <div style="font-size: 18px; color: #888; margin-bottom: 6px;">æƒé‡çŸ©é˜µ Wâ‚</div>
          <div class="matrix">
            <div class="matrix-row">
              <div class="cell">wâ‚â‚Â¹</div><div class="cell">wâ‚â‚‚Â¹</div><div class="cell">wâ‚â‚ƒÂ¹</div>
            </div>
            <div class="matrix-row">
              <div class="cell">wâ‚‚â‚Â¹</div><div class="cell">wâ‚‚â‚‚Â¹</div><div class="cell">wâ‚‚â‚ƒÂ¹</div>
            </div>
            <div class="matrix-row">
              <div class="cell">wâ‚ƒâ‚Â¹</div><div class="cell">wâ‚ƒâ‚‚Â¹</div><div class="cell">wâ‚ƒâ‚ƒÂ¹</div>
            </div>
            <div class="matrix-row">
              <div class="cell">wâ‚„â‚Â¹</div><div class="cell">wâ‚„â‚‚Â¹</div><div class="cell">wâ‚„â‚ƒÂ¹</div>
            </div>
          </div>
        </div>
        <span class="arrow" style="font-size: 32px;">+</span>
        <!-- bâ‚ å‘é‡ -->
        <div style="display: flex; flex-direction: column; align-items: center;">
          <div style="font-size: 18px; color: #888; margin-bottom: 6px;">åç½®å‘é‡ bâ‚</div>
          <div class="vector" style="flex-direction: column;">
            <div class="cell">bâ‚â‚</div>
            <div class="cell">bâ‚â‚‚</div>
            <div class="cell">bâ‚â‚ƒ</div>
            <div class="cell">bâ‚â‚„</div>
          </div>
        </div>
        <span class="arrow" style="font-size: 32px;">=</span>
        <!-- h å‘é‡ -->
        <div style="display: flex; flex-direction: column; align-items: center;">
          <div style="font-size: 18px; color: #888; margin-bottom: 6px;">éšè—å±‚å‘é‡ h</div>
          <div class="vector" style="flex-direction: column;">
            <div class="cell highlight">hâ‚</div>
            <div class="cell highlight">hâ‚‚</div>
            <div class="cell highlight">hâ‚ƒ</div>
            <div class="cell highlight">hâ‚„</div>
          </div>
        </div>
      </div>
      <div id="matrix-steps" style="margin-top: 32px; display: flex; flex-direction: column; gap: 40px; align-items: center;">
        <div class="step-box" style="background: linear-gradient(135deg, #232b3a 0%, #2e3c54 100%); border-radius: 16px; box-shadow: 0 2px 12px #1de9b633; border: 2px solid #3de0ff44; display: flex; flex-direction: column; align-items: center; min-width: 340px; max-width: 520px; padding: 32px 24px;">
          <div class="formula" style="font-size: 22px; margin-bottom: 10px; font-weight: bold;">æ­¥éª¤ 1: çŸ©é˜µä¹˜æ³• <b>Wâ‚ğ‘¥</b></div>
          <div style="display: flex; flex-direction: column; gap: 12px; align-items: center;">
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">wâ‚â‚Â¹Â·xâ‚ + wâ‚â‚‚Â¹Â·xâ‚‚ + wâ‚â‚ƒÂ¹Â·xâ‚ƒ</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">wâ‚‚â‚Â¹Â·xâ‚ + wâ‚‚â‚‚Â¹Â·xâ‚‚ + wâ‚‚â‚ƒÂ¹Â·xâ‚ƒ</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">wâ‚ƒâ‚Â¹Â·xâ‚ + wâ‚ƒâ‚‚Â¹Â·xâ‚‚ + wâ‚ƒâ‚ƒÂ¹Â·xâ‚ƒ</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">wâ‚„â‚Â¹Â·xâ‚ + wâ‚„â‚‚Â¹Â·xâ‚‚ + wâ‚„â‚ƒÂ¹Â·xâ‚ƒ</div>
            </div>
          </div>
        </div>
        <div class="step-box" style="background: linear-gradient(135deg, #232b3a 0%, #2e3c54 100%); border-radius: 16px; box-shadow: 0 2px 12px #1de9b633; border: 2px solid #3de0ff44; display: flex; flex-direction: column; align-items: center; min-width: 340px; max-width: 520px; padding: 32px 24px;">
          <div class="formula" style="font-size: 22px; margin-bottom: 10px; font-weight: bold;">æ­¥éª¤ 2: åŠ ä¸Šåç½®å‘é‡ <b>bâ‚</b></div>
          <div style="display: flex; flex-direction: column; gap: 12px; align-items: center;">
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">wâ‚â‚Â¹Â·xâ‚ + wâ‚â‚‚Â¹Â·xâ‚‚ + wâ‚â‚ƒÂ¹Â·xâ‚ƒ + bâ‚â‚</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">wâ‚‚â‚Â¹Â·xâ‚ + wâ‚‚â‚‚Â¹Â·xâ‚‚ + wâ‚‚â‚ƒÂ¹Â·xâ‚ƒ + bâ‚â‚‚</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">wâ‚ƒâ‚Â¹Â·xâ‚ + wâ‚ƒâ‚‚Â¹Â·xâ‚‚ + wâ‚ƒâ‚ƒÂ¹Â·xâ‚ƒ + bâ‚â‚ƒ</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">wâ‚„â‚Â¹Â·xâ‚ + wâ‚„â‚‚Â¹Â·xâ‚‚ + wâ‚„â‚ƒÂ¹Â·xâ‚ƒ + bâ‚â‚„</div>
            </div>
          </div>
        </div>
        <div class="step-box" style="background: linear-gradient(135deg, #232b3a 0%, #2e3c54 100%); border-radius: 16px; box-shadow: 0 2px 12px #1de9b633; border: 2px solid #3de0ff44; display: flex; flex-direction: column; align-items: center; min-width: 340px; max-width: 520px; padding: 32px 24px;">
          <div class="formula" style="font-size: 22px; margin-bottom: 10px; font-weight: bold;">æ­¥éª¤ 3: åº”ç”¨æ¿€æ´»å‡½æ•° <b>Ïƒ</b></div>
          <div style="display: flex; flex-direction: column; gap: 12px; align-items: center;">
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">hâ‚ = Ïƒ(wâ‚â‚Â¹Â·xâ‚ + wâ‚â‚‚Â¹Â·xâ‚‚ + wâ‚â‚ƒÂ¹Â·xâ‚ƒ + bâ‚â‚)</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">hâ‚‚ = Ïƒ(wâ‚‚â‚Â¹Â·xâ‚ + wâ‚‚â‚‚Â¹Â·xâ‚‚ + wâ‚‚â‚ƒÂ¹Â·xâ‚ƒ + bâ‚â‚‚)</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">hâ‚ƒ = Ïƒ(wâ‚ƒâ‚Â¹Â·xâ‚ + wâ‚ƒâ‚‚Â¹Â·xâ‚‚ + wâ‚ƒâ‚ƒÂ¹Â·xâ‚ƒ + bâ‚â‚ƒ)</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">hâ‚„ = Ïƒ(wâ‚„â‚Â¹Â·xâ‚ + wâ‚„â‚‚Â¹Â·xâ‚‚ + wâ‚„â‚ƒÂ¹Â·xâ‚ƒ + bâ‚â‚„)</div>
            </div>
          </div>
        </div>
      </div>
      <div class="note">å‘é‡å’ŒçŸ©é˜µç”¨å°æ–¹å—é˜µåˆ—è¡¨ç¤ºï¼Œä¾¿äºç†è§£æ•´ä½“è¿ç®—</div>
    </div>
    <div class="section">
      <h2>4. è¾“å‡ºå±‚è®¡ç®—è¿‡ç¨‹</h2>
      <div class="step-label">è¾“å‡ºå±‚æ•´ä½“è®¡ç®—ï¼š<br> <span class="formula">\( \mathbf{y} = \sigma(\mathbf{W}_2 \mathbf{h} + \mathbf{b}_2) \)</span></div>
      <!-- è¾“å‡ºå±‚çŸ©é˜µè®¡ç®—ç¤ºæ„å›¾ -->
      <div style="display: flex; align-items: center; justify-content: center; margin: 32px 0 40px 0; gap: 24px;">
        <!-- h å‘é‡ -->
        <div style="display: flex; flex-direction: column; align-items: center;">
          <div style="font-size: 18px; color: #888; margin-bottom: 6px;">éšè—å±‚å‘é‡ h</div>
          <div class="vector" style="flex-direction: column;">
            <div class="cell highlight">hâ‚</div>
            <div class="cell highlight">hâ‚‚</div>
            <div class="cell highlight">hâ‚ƒ</div>
            <div class="cell highlight">hâ‚„</div>
          </div>
        </div>
        <span class="arrow" style="font-size: 32px;">Ã—</span>
        <!-- Wâ‚‚ çŸ©é˜µ -->
        <div style="display: flex; flex-direction: column; align-items: flex-end;">
          <div style="font-size: 18px; color: #888; margin-bottom: 6px;">æƒé‡çŸ©é˜µ Wâ‚‚</div>
          <div class="matrix">
            <div class="matrix-row">
              <div class="cell">wâ‚â‚Â²</div><div class="cell">wâ‚â‚‚Â²</div><div class="cell">wâ‚â‚ƒÂ²</div><div class="cell">wâ‚â‚„Â²</div>
            </div>
            <div class="matrix-row">
              <div class="cell">wâ‚‚â‚Â²</div><div class="cell">wâ‚‚â‚‚Â²</div><div class="cell">wâ‚‚â‚ƒÂ²</div><div class="cell">wâ‚‚â‚„Â²</div>
            </div>
          </div>
        </div>
        <span class="arrow" style="font-size: 32px;">+</span>
        <!-- bâ‚‚ å‘é‡ -->
        <div style="display: flex; flex-direction: column; align-items: center;">
          <div style="font-size: 18px; color: #888; margin-bottom: 6px;">åç½®å‘é‡ bâ‚‚</div>
          <div class="vector" style="flex-direction: column;">
            <div class="cell">bâ‚‚â‚</div>
            <div class="cell">bâ‚‚â‚‚</div>
          </div>
        </div>
        <span class="arrow" style="font-size: 32px;">=</span>
        <!-- y å‘é‡ -->
        <div style="display: flex; flex-direction: column; align-items: center;">
          <div style="font-size: 18px; color: #888; margin-bottom: 6px;">è¾“å‡ºå±‚å‘é‡ y</div>
          <div class="vector" style="flex-direction: column;">
            <div class="cell highlight">yâ‚</div>
            <div class="cell highlight">yâ‚‚</div>
          </div>
        </div>
      </div>
      <!-- è¾“å‡ºå±‚è¯¦ç»†åˆ†æ­¥ -->
      <div id="output-steps" style="margin-top: 32px; display: flex; flex-direction: column; gap: 40px; align-items: center;">
        <div class="step-box" style="background: linear-gradient(135deg, #232b3a 0%, #2e3c54 100%); border-radius: 16px; box-shadow: 0 2px 12px #1de9b633; border: 2px solid #3de0ff44; display: flex; flex-direction: column; align-items: center; min-width: 340px; max-width: 520px; padding: 32px 24px;">
          <div class="formula" style="font-size: 28px; font-weight: bold; color: #1de9b6; text-shadow: 0 2px 12px #1de9b6cc, 0 0px 2px #fff; letter-spacing: 2px;">æ­¥éª¤ 1</div>
          <div class="formula" style="font-size: 20px; color: #3de0ff; margin-bottom: 18px; font-weight: 500;">çŸ©é˜µä¹˜æ³• Wâ‚‚h</div>
          <div style="display: flex; flex-direction: column; gap: 12px; align-items: center;">
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">wâ‚â‚Â²Â·hâ‚ + wâ‚â‚‚Â²Â·hâ‚‚ + wâ‚â‚ƒÂ²Â·hâ‚ƒ + wâ‚â‚„Â²Â·hâ‚„</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">wâ‚‚â‚Â²Â·hâ‚ + wâ‚‚â‚‚Â²Â·hâ‚‚ + wâ‚‚â‚ƒÂ²Â·hâ‚ƒ + wâ‚‚â‚„Â²Â·hâ‚„</div>
            </div>
          </div>
        </div>
        <div class="step-box" style="background: linear-gradient(135deg, #232b3a 0%, #2e3c54 100%); border-radius: 16px; box-shadow: 0 2px 12px #1de9b633; border: 2px solid #3de0ff44; display: flex; flex-direction: column; align-items: center; min-width: 340px; max-width: 520px; padding: 32px 24px;">
          <div class="formula" style="font-size: 28px; font-weight: bold; color: #1de9b6; text-shadow: 0 2px 12px #1de9b6cc, 0 0px 2px #fff; letter-spacing: 2px;">æ­¥éª¤ 2</div>
          <div class="formula" style="font-size: 20px; color: #3de0ff; margin-bottom: 18px; font-weight: 500;">åŠ ä¸Šåç½®å‘é‡ bâ‚‚</div>
          <div style="display: flex; flex-direction: column; gap: 12px; align-items: center;">
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">wâ‚â‚Â²Â·hâ‚ + wâ‚â‚‚Â²Â·hâ‚‚ + wâ‚â‚ƒÂ²Â·hâ‚ƒ + wâ‚â‚„Â²Â·hâ‚„ + bâ‚‚â‚</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">wâ‚‚â‚Â²Â·hâ‚ + wâ‚‚â‚‚Â²Â·hâ‚‚ + wâ‚‚â‚ƒÂ²Â·hâ‚ƒ + wâ‚‚â‚„Â²Â·hâ‚„ + bâ‚‚â‚‚</div>
            </div>
          </div>
        </div>
        <div class="step-box" style="background: linear-gradient(135deg, #232b3a 0%, #2e3c54 100%); border-radius: 16px; box-shadow: 0 2px 12px #1de9b633; border: 2px solid #3de0ff44; display: flex; flex-direction: column; align-items: center; min-width: 340px; max-width: 520px; padding: 32px 24px;">
          <div class="formula" style="font-size: 28px; font-weight: bold; color: #1de9b6; text-shadow: 0 2px 12px #1de9b6cc, 0 0px 2px #fff; letter-spacing: 2px;">æ­¥éª¤ 3</div>
          <div class="formula" style="font-size: 20px; color: #3de0ff; margin-bottom: 18px; font-weight: 500;">åº”ç”¨æ¿€æ´»å‡½æ•° Ïƒ</div>
          <div style="display: flex; flex-direction: column; gap: 12px; align-items: center;">
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">yâ‚ = Ïƒ(wâ‚â‚Â²Â·hâ‚ + wâ‚â‚‚Â²Â·hâ‚‚ + wâ‚â‚ƒÂ²Â·hâ‚ƒ + wâ‚â‚„Â²Â·hâ‚„ + bâ‚‚â‚)</div>
            </div>
            <div class="vector" style="margin-bottom: 0;">
              <div class="cell highlight">yâ‚‚ = Ïƒ(wâ‚‚â‚Â²Â·hâ‚ + wâ‚‚â‚‚Â²Â·hâ‚‚ + wâ‚‚â‚ƒÂ²Â·hâ‚ƒ + wâ‚‚â‚„Â²Â·hâ‚„ + bâ‚‚â‚‚)</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    // ç¥ç»å…ƒå‚æ•°
    const mlpLayers = [
      { x: 80, count: 3, color: '#ffb347', label: 'è¾“å…¥å±‚' },
      { x: 350, count: 4, color: '#4f8cff', label: 'éšè—å±‚' },
      { x: 650, count: 2, color: '#43d19e', label: 'è¾“å‡ºå±‚' }
    ];
    const neuronRadius = 16;
    const structureHeight = 320;
    // ç”Ÿæˆç¥ç»å…ƒèŠ‚ç‚¹
    function renderMLPNodes() {
      const container = document.getElementById('mlp-nodes');
      container.innerHTML = '';
      mlpLayers.forEach((layer, li) => {
        const gap = (structureHeight - layer.count * neuronRadius * 2) / (layer.count + 1);
        for (let i = 0; i < layer.count; i++) {
          const y = gap * (i + 1) + neuronRadius + i * neuronRadius * 2;
          const neuron = document.createElement('div');
          neuron.className = 'neuron';
          neuron.style.background = layer.color;
          neuron.style.position = 'absolute';
          neuron.style.left = (layer.x) + 'px';
          neuron.style.top = (y - neuronRadius) + 'px';
          neuron.style.zIndex = 2;
          neuron.innerText = li === 0 ? `x${i+1}` : (li === 1 ? `h${i+1}` : `y${i+1}`);
          container.appendChild(neuron);
        }
        // å±‚æ ‡ç­¾
        const label = document.createElement('div');
        label.className = 'layer-label';
        label.style.position = 'absolute';
        label.style.left = (layer.x - 20) + 'px';
        label.style.top = (structureHeight - 30) + 'px';
        label.style.width = '60px';
        label.style.textAlign = 'center';
        label.innerText = layer.label;
        label.style.zIndex = 2;
        container.appendChild(label);
      });
    }
    // ç»˜åˆ¶MLPç»“æ„çš„è¿çº¿ï¼ˆä¸ç¥ç»å…ƒåœ†ç‚¹ä¸¥æ ¼å¯¹é½ï¼‰
    function drawMLPLines() {
      const canvas = document.getElementById('mlp-canvas');
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      // ç¥ç»å…ƒä¸­å¿ƒåæ ‡
      const inputX = 80 + 16, inputY = [55+16, 145+16, 240+16];
      const hiddenX = 350 + 16, hiddenY = [40+16, 110+16, 180+16, 250+16];
      const outputX = 650 + 16, outputY = [90+16, 190+16];
      // ç”»æ™®é€šè¿çº¿
      ctx.strokeStyle = '#b6c2d9';
      ctx.lineWidth = 2;
      for (let l = 0; l < 2; l++) {
        const fromX = l === 0 ? inputX : hiddenX;
        const fromY = l === 0 ? inputY : hiddenY;
        const toX = l === 0 ? hiddenX : outputX;
        const toY = l === 0 ? hiddenY : outputY;
        for (let i = 0; i < fromY.length; i++) {
          for (let j = 0; j < toY.length; j++) {
            // é«˜äº®x1/x2/x3åˆ°h1çš„ä¸‰æ¡çº¿
            if (l === 0 && j === 0 && i < 3) continue;
            ctx.beginPath();
            ctx.moveTo(fromX, fromY[i]);
            ctx.lineTo(toX, toY[j]);
            ctx.stroke();
          }
        }
      }
      // é«˜äº®x1/x2/x3åˆ°h1çš„ä¸‰æ¡çº¿
      ctx.strokeStyle = '#1de9b6';
      ctx.lineWidth = 4.5;
      for (let i = 0; i < 3; i++) {
        ctx.beginPath();
        ctx.moveTo(inputX, inputY[i]);
        ctx.lineTo(hiddenX, hiddenY[0]);
        ctx.stroke();
      }
    }
    // åˆå§‹åŒ–ç»“æ„å›¾
    function renderMLPStructure() {
      renderMLPNodes();
      drawMLPLines();
      // åœ¨canvasä¸Šæ ‡æ³¨h1çš„æƒé‡
      const canvas = document.getElementById('mlp-canvas');
      const ctx = canvas.getContext('2d');
      // ç¥ç»å…ƒä¸­å¿ƒåæ ‡ï¼ˆä¸HTMLç»å¯¹å®šä½ä¸€è‡´ï¼‰
      const inputX = 80 + 18, inputY = [40+18, 140+18, 240+18];
      const hiddenX = 350 + 18, hiddenY = [10+18, 90+18, 170+18, 250+18];
      // x1/x2/x3 -> h1
      const weights = ['wâ‚â‚Â¹', 'wâ‚â‚‚Â¹', 'wâ‚â‚ƒÂ¹'];
      ctx.font = 'bold 18px Arial';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      for (let i = 0; i < 3; i++) {
        // è®¡ç®—ä¸­ç‚¹
        const x0 = inputX, y0 = inputY[i];
        const x1 = hiddenX, y1 = hiddenY[0];
        const mx = x0 + (x1 - x0) * 0.55;
        const my = y0 + (y1 - y0) * 0.55;
        // ç»˜åˆ¶é«˜äº®è‰²å—
        ctx.save();
        ctx.beginPath();
        ctx.strokeStyle = '#1de9b6';
        ctx.fillStyle = '#232b3a';
        ctx.lineWidth = 2.5;
        ctx.shadowColor = '#1de9b6';
        ctx.shadowBlur = 8;
        ctx.roundRect(mx-28, my-16, 56, 32, 8);
        ctx.fill();
        ctx.stroke();
        ctx.restore();
        // ç»˜åˆ¶æƒé‡æ–‡å­—
        ctx.save();
        ctx.fillStyle = '#1de9b6';
        ctx.font = 'bold 18px Arial';
        ctx.shadowColor = '#000';
        ctx.shadowBlur = 2;
        ctx.fillText(weights[i], mx, my);
        ctx.restore();
      }
    }
    window.onload = function() {
      renderMLPStructure();
    };
  </script>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</body>
</html> 